<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Sum Calculator</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
</head>
<body onload="brython()">
    <h1>Sum Calculator 1154 </h1>
    <p>Enter the numbers:</p>

    <!-- First Number Input -->
    <div class="input-group">
        <label for="num1">Max dB of Heat Pump:</label>
        <input type="number" id="num1" placeholder="Enter number">
    </div>

    <!-- Second Number Input -->
    <div class="input-group">
        <label for="num2">Reflective surfaces (Q2 Q4 Q8) Enter 1-3:</label>
        <input type="number" id="num2" placeholder="Enter number">
    </div>

    <!-- third Number Input -->
    <div class="input-group">
        <label for="num3">Distance Heat Pump to Assessment Point 1m-30m:</label>
        <input type="number" id="num3" placeholder="Enter number">
    </div>

    <!-- fourth Number Input -->
    <div class="input-group">
        <label for="num4">Barrier: None=0 Partial=5 Full=10:</label>
        <input type="number" id="num4" placeholder="Enter number">
    </div>
    <br>

    <!-- Calculate Button -->
    <div>
        <button type="button" id="calculate-button">Calculate</button>
    </div>

    <!-- Result Display -->
    <p id="result"></p>

    <script type="text/python">
        from browser import document, alert

        def calculate_sum(event):
            # Get the input values
            num1 = document['num1'].value
            num2 = document['num2'].value
            num3 = document['num3'].value
            num4 = document['num4'].value
        
            bStep4ByTable = True #As original MCS020 Note 4 page 21/25
        
            #NOTE 4: DB DISTANCE REDUCTION (14 column table)
            hrr = [[1,1.5,2,3,4,5,6,8,10,12,15,20,25,30],
            [-8,-11,-14,-17,-20,-21,-23,-26,-28,-29,-31,-34,-36,-37]]
            
            #NOTE 7: DECIBEL CORRECTION (STEP 9)
            ArrStp9 = [3.0,2.5,2.1,1.8,1.5,1.2,1.0,0.8,0.6,0.5,0.4,0.3,0.3,0.2,0.2,0.1]
            sgUt = ""
            
            #Test
            sgUt += "Test 1\n"
            iRws = [0,3,6]
            for yy in iRws:
              #range(6) is values 0 to 5.
              for xx in range(14):
                iTablVal = hrr[1][xx] + yy
                if yy > 0 and xx == 5:
                  iTablVal -= 1 #anomaly
                #print(iTablVal, end='');
                sgUt += str(iTablVal) + " "
              sgUt += "\n"

            try:
                # Convert to float and calculate the sum
                sum_result = float(num1) + float(num2) + float(num3) + float(num4)
                document['result'].text = sgUt + f"Sum: {sum_result}"
            except ValueError:
                # Handle invalid input
                document['result'].text = sgUt + "Please enter valid numbers."

        # Attach the calculate_sum function to the button click event
        document['calculate-button'].bind('click', calculate_sum)
    </script>
</body>
</html>
